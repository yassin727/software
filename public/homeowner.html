<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homeowner Dashboard - MaidTrack</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <div class="logo">
            <i class="fas fa-home"></i>
            <h2>MaidTrack</h2>
        </div>
        <nav class="nav-menu">
            <a href="#dashboard" class="nav-item active" onclick="showSection('dashboard')">
                <i class="fas fa-th-large"></i>
                <span>Dashboard</span>
            </a>
            <a href="#search-maids" class="nav-item" onclick="showSection('search-maids')">
                <i class="fas fa-search"></i>
                <span>Search Maids</span>
            </a>
            <a href="#my-bookings" class="nav-item" onclick="showSection('my-bookings')">
                <i class="fas fa-calendar-check"></i>
                <span>My Bookings</span>
            </a>

            <a href="#history" class="nav-item" onclick="showSection('history')">
                <i class="fas fa-history"></i>
                <span>History</span>
            </a>
            <a href="#messages" class="nav-item" onclick="showSection('messages')">
                <i class="fas fa-envelope"></i>
                <span>Messages</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <a href="#profile" class="nav-item" onclick="showSection('profile')">
                <i class="fas fa-user-circle"></i>
                <span>Profile</span>
            </a>
            <a href="#" class="nav-item" onclick="handleHomeownerLogout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <button class="menu-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 id="page-title">Homeowner Dashboard</h1>
            </div>
            <div class="header-right">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search...">
                </div>
                <div class="notification-wrapper">
                    <button class="notification-btn" onclick="toggleNotificationPanel()">
                        <i class="fas fa-bell"></i>
                        <span class="badge notification-badge" id="notificationBadge">0</span>
                    </button>
                    <div class="notification-panel" id="notificationPanel">
                        <div class="notification-header">
                            <h3>Notifications</h3>
                            <button class="mark-all-read" onclick="markAllNotificationsRead()">Mark all read</button>
                        </div>
                        <div class="notification-list" id="notificationList">
                            <div class="notification-empty">
                                <i class="fas fa-bell-slash"></i>
                                <p>No notifications</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="user-profile">
                    <img src="https://via.placeholder.com/40" alt="User">
                    <span>John Doe</span>
                </div>
            </div>
        </header>

        <!-- Dashboard Section -->
        <section id="dashboard" class="content-section active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon blue">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-details">
                        <h3>3</h3>
                        <p>Active Bookings</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon green">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <div class="stat-details">
                        <h3>1</h3>
                        <p>Maid On-site Today</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon orange">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-details">
                        <h3>2</h3>
                        <p>Pending Reviews</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon red">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-details">
                        <h3>$320</h3>
                        <p>This Month</p>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <!-- Today's Schedule -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-calendar-day"></i> Today's Schedule</h3>
                        <button class="btn-small" onclick="showSection('my-bookings')">View All</button>
                    </div>
                    <div class="schedule-list">
                        <div class="schedule-item active-booking">
                            <div class="schedule-time">10:00 AM</div>
                            <div class="schedule-details">
                                <h4>Maria Garcia</h4>
                                <p><i class="fas fa-broom"></i> General House Cleaning</p>
                                <p><i class="fas fa-map-marker-alt"></i> Sector 1, Building A</p>
                            </div>
                            <div class="booking-actions">
                                <span class="status-badge active">In Progress</span>
                                <button class="btn-icon" onclick="trackMaid(1)">
                                    <i class="fas fa-location-arrow"></i>
                                </button>
                            </div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">02:00 PM</div>
                            <div class="schedule-details">
                                <h4>Sarah Johnson</h4>
                                <p><i class="fas fa-soap"></i> Deep Cleaning</p>
                                <p><i class="fas fa-map-marker-alt"></i> Sector 1, Building A</p>
                            </div>
                            <div class="booking-actions">
                                <span class="status-badge pending">Upcoming</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                    </div>
                    <div class="quick-actions">
                        <button class="action-btn" onclick="showSection('search-maids')">
                            <i class="fas fa-search"></i>
                            <span>Find a Maid</span>
                        </button>
                        <button class="action-btn" onclick="openBookingModal()">
                            <i class="fas fa-calendar-plus"></i>
                            <span>Book Service</span>
                        </button>
                        <button class="action-btn" onclick="showSection('my-bookings')">
                            <i class="fas fa-calendar-check"></i>
                            <span>My Bookings</span>
                        </button>
                        <button class="action-btn" onclick="showSection('messages')">
                            <i class="fas fa-comments"></i>
                            <span>Messages</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-history"></i> Recent Activity</h3>
                </div>
                <div class="activity-timeline">
                    <div class="timeline-item">
                        <div class="timeline-marker green"></div>
                        <div class="timeline-content">
                            <p><strong>Maria Garcia</strong> checked in</p>
                            <span class="time">10:00 AM - Today</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-marker blue"></div>
                        <div class="timeline-content">
                            <p><strong>Sarah Johnson</strong> accepted your booking</p>
                            <span class="time">8:30 AM - Today</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-marker orange"></div>
                        <div class="timeline-content">
                            <p>Booking reminder: <strong>Deep Cleaning</strong> at 2:00 PM</p>
                            <span class="time">7:00 AM - Today</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Search Maids Section -->
        <section id="search-maids" class="content-section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-filter"></i> Search Filters</h3>
                </div>
                <div class="search-filters">
                    <div class="filter-group">
                        <label>Location</label>
                        <select>
                            <option>All Locations</option>
                            <option>Sector 1</option>
                            <option>Sector 2</option>
                            <option>Sector 3</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Specialization</label>
                        <select>
                            <option>All Types</option>
                            <option>General Cleaning</option>
                            <option>Deep Cleaning</option>
                            <option>Kitchen Specialist</option>
                            <option>Laundry Specialist</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Availability</label>
                        <select>
                            <option>Any Time</option>
                            <option>Available Now</option>
                            <option>Available Today</option>
                            <option>Available This Week</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Rating</label>
                        <select>
                            <option>All Ratings</option>
                            <option>4.5+ Stars</option>
                            <option>4.0+ Stars</option>
                            <option>3.5+ Stars</option>
                        </select>
                    </div>
                    <button class="btn-primary">Apply Filters</button>
                </div>
            </div>

            <!-- Maid Cards -->
            <div class="maid-cards-grid">
                <div class="maid-card">
                    <div class="maid-card-header">
                        <img src="https://via.placeholder.com/80" alt="Maid">
                        <span class="online-badge">Online</span>
                    </div>
                    <div class="maid-card-body">
                        <h3>Maria Garcia</h3>
                        <div class="maid-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                            <span>4.8 (127 reviews)</span>
                        </div>
                        <p class="maid-specialization">
                            <i class="fas fa-broom"></i> General Cleaning
                        </p>
                        <p class="maid-location">
                            <i class="fas fa-map-marker-alt"></i> 2.3 km away
                        </p>
                        <p class="maid-rate">
                            <i class="fas fa-dollar-sign"></i> $15/hour
                        </p>
                        <div class="maid-tags">
                            <span class="tag">Verified</span>
                            <span class="tag">Top Rated</span>
                        </div>
                    </div>
                    <div class="maid-card-footer">
                        <button class="btn-secondary" onclick="viewMaidProfile(1)">View Profile</button>
                        <button class="btn-primary" onclick="bookMaid(1, 'Maria Garcia')">Book Now</button>
                    </div>
                </div>

                <div class="maid-card">
                    <div class="maid-card-header">
                        <img src="https://via.placeholder.com/80" alt="Maid">
                        <span class="online-badge">Online</span>
                    </div>
                    <div class="maid-card-body">
                        <h3>Sarah Johnson</h3>
                        <div class="maid-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <span>4.9 (98 reviews)</span>
                        </div>
                        <p class="maid-specialization">
                            <i class="fas fa-soap"></i> Deep Cleaning
                        </p>
                        <p class="maid-location">
                            <i class="fas fa-map-marker-alt"></i> 3.1 km away
                        </p>
                        <p class="maid-rate">
                            <i class="fas fa-dollar-sign"></i> $18/hour
                        </p>
                        <div class="maid-tags">
                            <span class="tag">Verified</span>
                            <span class="tag">Experienced</span>
                        </div>
                    </div>
                    <div class="maid-card-footer">
                        <button class="btn-secondary" onclick="viewMaidProfile(2)">View Profile</button>
                        <button class="btn-primary" onclick="bookMaid(2, 'Sarah Johnson')">Book Now</button>
                    </div>
                </div>

                <div class="maid-card">
                    <div class="maid-card-header">
                        <img src="https://via.placeholder.com/80" alt="Maid">
                        <span class="offline-badge">Offline</span>
                    </div>
                    <div class="maid-card-body">
                        <h3>Lisa Brown</h3>
                        <div class="maid-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                            <span>4.2 (64 reviews)</span>
                        </div>
                        <p class="maid-specialization">
                            <i class="fas fa-utensils"></i> Kitchen Specialist
                        </p>
                        <p class="maid-location">
                            <i class="fas fa-map-marker-alt"></i> 4.5 km away
                        </p>
                        <p class="maid-rate">
                            <i class="fas fa-dollar-sign"></i> $16/hour
                        </p>
                        <div class="maid-tags">
                            <span class="tag">Verified</span>
                        </div>
                    </div>
                    <div class="maid-card-footer">
                        <button class="btn-secondary" onclick="viewMaidProfile(3)">View Profile</button>
                        <button class="btn-primary" disabled>Currently Offline</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- My Bookings Section -->
        <section id="my-bookings" class="content-section">
            <div class="section-header">
                <button class="btn-primary" onclick="openBookingModal()">
                    <i class="fas fa-plus"></i> New Booking
                </button>
            </div>

            <div class="bookings-tabs">
                <button class="tab-btn active" onclick="filterBookings('all')">All</button>
                <button class="tab-btn" onclick="filterBookings('upcoming')">Upcoming</button>
                <button class="tab-btn" onclick="filterBookings('active')">Active</button>
                <button class="tab-btn" onclick="filterBookings('completed')">Completed</button>
                <button class="tab-btn" onclick="filterBookings('cancelled')">Cancelled</button>
            </div>

            <div class="bookings-list">
                <div class="booking-card active-card">
                    <div class="booking-header">
                        <h3>Booking #1234</h3>
                        <span class="status-badge active">In Progress</span>
                    </div>
                    <div class="booking-body">
                        <div class="booking-maid-info">
                            <img src="https://via.placeholder.com/60" alt="Maid">
                            <div>
                                <h4>Maria Garcia</h4>
                                <p class="rating"><i class="fas fa-star"></i> 4.8</p>
                            </div>
                        </div>
                        <div class="booking-details">
                            <p><i class="fas fa-calendar"></i> <strong>Date:</strong> October 16, 2025</p>
                            <p><i class="fas fa-clock"></i> <strong>Time:</strong> 10:00 AM - 2:00 PM</p>
                            <p><i class="fas fa-broom"></i> <strong>Service:</strong> General House Cleaning</p>
                            <p><i class="fas fa-map-marker-alt"></i> <strong>Location:</strong> Sector 1, Building A, Apt 301</p>
                            <p><i class="fas fa-dollar-sign"></i> <strong>Rate:</strong> $15/hour (Est. $60)</p>
                        </div>
                    </div>
                    <div class="booking-footer">
                        <button class="btn-secondary" onclick="trackMaid(1)">
                            <i class="fas fa-location-arrow"></i> Track Maid
                        </button>
                        <button class="btn-secondary" onclick="contactMaid(1)">
                            <i class="fas fa-comment"></i> Message
                        </button>
                        <button class="btn-primary" onclick="viewTaskProgress(1)">
                            <i class="fas fa-tasks"></i> View Progress
                        </button>
                    </div>
                </div>

                <div class="booking-card">
                    <div class="booking-header">
                        <h3>Booking #1235</h3>
                        <span class="status-badge pending">Upcoming</span>
                    </div>
                    <div class="booking-body">
                        <div class="booking-maid-info">
                            <img src="https://via.placeholder.com/60" alt="Maid">
                            <div>
                                <h4>Sarah Johnson</h4>
                                <p class="rating"><i class="fas fa-star"></i> 4.9</p>
                            </div>
                        </div>
                        <div class="booking-details">
                            <p><i class="fas fa-calendar"></i> <strong>Date:</strong> October 16, 2025</p>
                            <p><i class="fas fa-clock"></i> <strong>Time:</strong> 2:00 PM - 6:00 PM</p>
                            <p><i class="fas fa-soap"></i> <strong>Service:</strong> Deep Cleaning</p>
                            <p><i class="fas fa-map-marker-alt"></i> <strong>Location:</strong> Sector 1, Building A, Apt 301</p>
                            <p><i class="fas fa-dollar-sign"></i> <strong>Rate:</strong> $18/hour (Est. $72)</p>
                        </div>
                    </div>
                    <div class="booking-footer">
                        <button class="btn-secondary" onclick="rescheduleBooking(2)">
                            <i class="fas fa-calendar-alt"></i> Reschedule
                        </button>
                        <button class="btn-secondary" onclick="cancelBooking(2)">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button class="btn-secondary" onclick="contactMaid(2)">
                            <i class="fas fa-comment"></i> Message
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- History Section -->
        <section id="history" class="content-section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-history"></i> Service History</h3>
                    <button class="btn-small" onclick="exportHistory()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
                
                <div class="history-filters">
                    <input type="date" value="2025-10-01">
                    <span>to</span>
                    <input type="date" value="2025-10-16">
                    <button class="btn-secondary">Filter</button>
                </div>

                <div class="history-list">
                    <div class="history-card">
                        <div class="history-header">
                            <h4>Booking #1230</h4>
                            <span class="status-badge completed">Completed</span>
                        </div>
                        <div class="history-body">
                            <div class="history-maid">
                                <img src="https://via.placeholder.com/50" alt="Maid">
                                <div>
                                    <h5>Maria Garcia</h5>
                                    <p>General House Cleaning</p>
                                </div>
                            </div>
                            <div class="history-details">
                                <p><i class="fas fa-calendar"></i> Oct 10, 2025</p>
                                <p><i class="fas fa-clock"></i> 10:00 AM - 2:00 PM</p>
                                <p><i class="fas fa-dollar-sign"></i> $60.00</p>
                            </div>
                            <div class="history-rating">
                                <div class="stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <p class="review">"Excellent work! Very thorough and professional."</p>
                            </div>
                        </div>
                        <div class="history-footer">
                            <button class="btn-small" onclick="viewInvoice(1230)">
                                <i class="fas fa-file-invoice"></i> Invoice
                            </button>
                            <button class="btn-small" onclick="bookAgain(1)">
                                <i class="fas fa-redo"></i> Book Again
                            </button>
                        </div>
                    </div>

                    <div class="history-card">
                        <div class="history-header">
                            <h4>Booking #1228</h4>
                            <span class="status-badge completed">Completed</span>
                        </div>
                        <div class="history-body">
                            <div class="history-maid">
                                <img src="https://via.placeholder.com/50" alt="Maid">
                                <div>
                                    <h5>Sarah Johnson</h5>
                                    <p>Deep Cleaning</p>
                                </div>
                            </div>
                            <div class="history-details">
                                <p><i class="fas fa-calendar"></i> Oct 3, 2025</p>
                                <p><i class="fas fa-clock"></i> 2:00 PM - 6:00 PM</p>
                                <p><i class="fas fa-dollar-sign"></i> $72.00</p>
                            </div>
                            <div class="history-rating pending-review">
                                <button class="btn-primary" onclick="openReviewModal(1228)">
                                    <i class="fas fa-star"></i> Leave Review
                                </button>
                            </div>
                        </div>
                        <div class="history-footer">
                            <button class="btn-small" onclick="viewInvoice(1228)">
                                <i class="fas fa-file-invoice"></i> Invoice
                            </button>
                            <button class="btn-small" onclick="bookAgain(2)">
                                <i class="fas fa-redo"></i> Book Again
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Messages Section -->
        <section id="messages" class="content-section">
            <div class="messages-container">
                <div class="messages-sidebar">
                    <div class="messages-header">
                        <h3>Messages</h3>
                    </div>
                    <div class="conversations-list">
                        <!-- Conversations loaded dynamically -->
                        <div class="empty-conversations">
                            <i class="fas fa-comments"></i>
                            <p>No conversations yet</p>
                            <small>Start a conversation by messaging a maid from your bookings</small>
                        </div>
                    </div>
                </div>
                <div class="messages-main">
                    <div class="chat-header">
                        <p style="color: var(--text-light);">Select a conversation to start messaging</p>
                    </div>
                    <div class="chat-messages">
                        <!-- Messages loaded dynamically -->
                        <div class="empty-messages">
                            <i class="fas fa-comment-dots"></i>
                            <p>No messages yet</p>
                            <small>Select a conversation from the left</small>
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" placeholder="Type a message...">
                        <button class="btn-primary"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile" class="content-section">
            <div class="profile-container">
                <div class="card profile-card">
                    <div class="card-header">
                        <h3><i class="fas fa-user-circle"></i> My Profile</h3>
                    </div>
                    <div class="profile-content">
                        <div class="avatar-section">
                            <div class="avatar-wrapper">
                                <img id="profileAvatar" src="https://via.placeholder.com/120" alt="Profile Photo">
                                <label for="avatarInput" class="avatar-upload-btn">
                                    <i class="fas fa-camera"></i>
                                </label>
                                <input type="file" id="avatarInput" accept="image/*" style="display: none;" onchange="uploadAvatar(event)">
                            </div>
                            <p class="avatar-hint">Click camera to change photo</p>
                        </div>
                        <form id="profileForm" class="profile-form" onsubmit="updateProfile(event)">
                            <div class="form-group">
                                <label>Full Name</label>
                                <input type="text" id="profileName" placeholder="Your name" required>
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" id="profileEmail" disabled>
                            </div>
                            <div class="form-group">
                                <label>Phone (optional)</label>
                                <input type="tel" id="profilePhone" placeholder="Your phone number">
                            </div>
                            <div class="form-group">
                                <label>Member Since</label>
                                <input type="text" id="profileMemberSince" disabled>
                            </div>
                            <button type="submit" class="btn-primary">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </form>
                    </div>
                </div>

                <div class="card password-card">
                    <div class="card-header">
                        <h3><i class="fas fa-lock"></i> Change Password</h3>
                    </div>
                    <form id="passwordForm" class="password-form" onsubmit="changePassword(event)">
                        <div class="form-group">
                            <label>Current Password</label>
                            <input type="password" id="currentPassword" placeholder="Enter current password" required>
                        </div>
                        <div class="form-group">
                            <label>New Password</label>
                            <input type="password" id="newPassword" placeholder="Enter new password (min 6 chars)" required minlength="6">
                        </div>
                        <div class="form-group">
                            <label>Confirm New Password</label>
                            <input type="password" id="confirmPassword" placeholder="Confirm new password" required minlength="6">
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-key"></i> Change Password
                        </button>
                    </form>
                </div>
            </div>
        </section>
    </div>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Book a Maid Service</h2>
                <button class="close-btn" onclick="closeModal('bookingModal')">&times;</button>
            </div>
            <form id="bookingForm" class="form" onsubmit="submitBooking(event)">
                <div class="form-group">
                    <label>Select Maid *</label>
                    <select id="maidSelect" required>
                        <option value="">Choose a maid...</option>
                    </select>
                    <p id="maidRateDisplay" class="form-hint" style="margin-top: 4px; color: var(--text-light);"></p>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Date *</label>
                        <input type="date" id="bookingDate" required>
                    </div>
                    <div class="form-group">
                        <label>Start Time *</label>
                        <input type="time" id="bookingTime" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Duration (hours) *</label>
                        <input type="number" id="bookingDuration" min="1" max="8" value="4" required>
                    </div>
                    <div class="form-group">
                        <label>Service Type *</label>
                        <select id="bookingServiceType" required>
                            <option value="">Select service...</option>
                            <option value="General Cleaning">General Cleaning</option>
                            <option value="Deep Cleaning">Deep Cleaning</option>
                            <option value="Kitchen Specialist">Kitchen Specialist</option>
                            <option value="Laundry Service">Laundry Service</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Address *</label>
                    <input type="text" id="bookingAddress" placeholder="Enter your address" required>
                </div>
                <div class="form-group">
                    <label>Hourly Rate ($) *</label>
                    <input type="number" id="bookingHourlyRate" min="1" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Special Instructions (optional)</label>
                    <textarea id="bookingInstructions" rows="3" placeholder="Any specific requirements or instructions..."></textarea>
                </div>
                
                <!-- Tasks Section -->
                <div class="form-group">
                    <label>Tasks/Checklist <small style="color: var(--text-light);">(Add tasks for the maid to complete)</small></label>
                    <div id="tasksContainer" style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 8px;">
                        <!-- Tasks will be added here dynamically -->
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="newTaskInput" placeholder="Enter task (e.g., Living Room - Dusting, vacuuming)" 
                               style="flex: 1; padding: 8px; border: 1px solid var(--border-color); border-radius: 6px;">
                        <button type="button" class="btn-secondary" onclick="addBookingTask()">
                            <i class="fas fa-plus"></i> Add Task
                        </button>
                    </div>
                    <small style="color: var(--text-light); display: block; margin-top: 4px;">
                        Tasks can be edited later from your booking details
                    </small>
                </div>
                
                <!-- Payment Method Selection -->
                <div class="form-group">
                    <label>Payment Method *</label>
                    <div class="payment-methods" style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <label class="payment-option" style="display: flex; align-items: center; gap: 8px; padding: 12px 16px; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer; flex: 1; min-width: 140px;">
                            <input type="radio" name="paymentMethod" value="cash" checked>
                            <i class="fas fa-money-bill-wave" style="color: #27ae60; font-size: 20px;"></i>
                            <div>
                                <strong>Cash</strong>
                                <small style="display: block; color: var(--text-light);">Pay maid directly</small>
                            </div>
                        </label>
                        <label class="payment-option" style="display: flex; align-items: center; gap: 8px; padding: 12px 16px; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer; flex: 1; min-width: 140px;">
                            <input type="radio" name="paymentMethod" value="card">
                            <i class="fas fa-credit-card" style="color: #3498db; font-size: 20px;"></i>
                            <div>
                                <strong>Card</strong>
                                <small style="display: block; color: var(--text-light);">Pay after service</small>
                            </div>
                        </label>
                        <label class="payment-option" style="display: flex; align-items: center; gap: 8px; padding: 12px 16px; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer; flex: 1; min-width: 140px;">
                            <input type="radio" name="paymentMethod" value="apple_pay">
                            <i class="fab fa-apple-pay" style="color: #000; font-size: 24px;"></i>
                            <div>
                                <strong>Apple Pay</strong>
                                <small style="display: block; color: var(--text-light);">Pay after service</small>
                            </div>
                        </label>
                    </div>
                    <p id="paymentMethodHint" style="margin-top: 8px; color: var(--text-light); font-size: 13px;">
                        <i class="fas fa-info-circle"></i> Cash payments are made directly to the maid after service completion.
                    </p>
                </div>
                
                <div class="booking-summary" style="background: var(--bg-light); padding: 12px; border-radius: 8px; margin-bottom: 16px;">
                    <p><strong>Estimated Total:</strong> <span id="estimatedTotal">$0.00</span></p>
                    <p id="paymentSummary" style="margin-top: 4px; font-size: 13px; color: var(--text-light);">
                        <i class="fas fa-money-bill-wave"></i> Payment: Cash to maid
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeModal('bookingModal')">Cancel</button>
                    <button type="submit" class="btn-primary">Confirm Booking</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Review Modal -->
    <div id="reviewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Rate Your Experience</h2>
                <button class="close-btn" onclick="closeModal('reviewModal')">&times;</button>
            </div>
            <form class="form" onsubmit="submitReview(event)">
                <div class="form-group">
                    <label>Overall Rating *</label>
                    <div class="star-rating">
                        <i class="far fa-star" data-rating="1"></i>
                        <i class="far fa-star" data-rating="2"></i>
                        <i class="far fa-star" data-rating="3"></i>
                        <i class="far fa-star" data-rating="4"></i>
                        <i class="far fa-star" data-rating="5"></i>
                    </div>
                </div>
                <div class="form-group">
                    <label>Your Review</label>
                    <textarea rows="4" placeholder="Share your experience..." required></textarea>
                </div>
                <div class="form-group">
                    <label>Would you recommend this maid?</label>
                    <div class="radio-group">
                        <label><input type="radio" name="recommend" value="yes" checked> Yes</label>
                        <label><input type="radio" name="recommend" value="no"> No</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeModal('reviewModal')">Cancel</button>
                    <button type="submit" class="btn-primary">Submit Review</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Payment Modal (for card/Apple Pay after checkout) -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-credit-card"></i> Complete Payment</h2>
                <button class="close-btn" onclick="closeModal('paymentModal')">&times;</button>
            </div>
            <div class="payment-modal-body">
                <div class="payment-info" style="background: var(--bg-light); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 id="paymentJobTitle" style="margin-bottom: 8px;">Service Completed</h4>
                    <p id="paymentMaidName" style="color: var(--text-light);"><i class="fas fa-user"></i> Maid: Maria Garcia</p>
                    
                    <!-- Payment Breakdown Section -->
                    <div id="paymentBreakdown" style="margin-top: 16px; padding-top: 12px; border-top: 1px solid var(--border-color);">
                        <!-- Will be populated by JavaScript -->
                    </div>
                    
                    <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border-color);">
                        <h3 id="paymentAmount" style="color: var(--primary-color);">Total: $60.00</h3>
                    </div>
                </div>
                
                <div id="paymentMethodSection">
                    <div class="payment-tabs" style="display: flex; gap: 8px; margin-bottom: 16px;">
                        <button type="button" class="payment-tab active" onclick="selectPaymentTab('card')" id="tabCard" style="flex: 1; padding: 12px; border: 2px solid var(--primary-color); background: var(--primary-color); color: white; border-radius: 8px; cursor: pointer;">
                            <i class="fas fa-credit-card"></i> Card
                        </button>
                        <button type="button" class="payment-tab" onclick="selectPaymentTab('apple_pay')" id="tabApplePay" style="flex: 1; padding: 12px; border: 2px solid var(--border-color); background: white; color: var(--text-color); border-radius: 8px; cursor: pointer;">
                            <i class="fab fa-apple-pay"></i> Apple Pay
                        </button>
                    </div>
                    
                    <!-- Card Payment Form -->
                    <div id="cardPaymentForm">
                        <div class="form-group">
                            <label>Card Number *</label>
                            <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                        </div>
                        <div class="form-row" style="display: flex; gap: 12px;">
                            <div class="form-group" style="flex: 1;">
                                <label>Expiry Date *</label>
                                <input type="text" id="cardExpiry" placeholder="MM/YY" maxlength="5" required>
                            </div>
                            <div class="form-group" style="flex: 1;">
                                <label>CVV *</label>
                                <input type="text" id="cardCvv" placeholder="123" maxlength="4" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Cardholder Name *</label>
                            <input type="text" id="cardName" placeholder="John Doe" required>
                        </div>
                    </div>
                    
                    <!-- Apple Pay Section -->
                    <div id="applePaySection" style="display: none; text-align: center; padding: 20px;">
                        <i class="fab fa-apple" style="font-size: 48px; margin-bottom: 16px;"></i>
                        <p style="margin-bottom: 16px;">Click the button below to pay with Apple Pay</p>
                        <button type="button" class="btn-apple-pay" onclick="processApplePay()" style="background: #000; color: white; padding: 14px 32px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer;">
                            <i class="fab fa-apple-pay" style="font-size: 24px;"></i> Pay with Apple Pay
                        </button>
                    </div>
                </div>
                
                <div class="modal-footer" style="margin-top: 20px;">
                    <button type="button" class="btn-secondary" onclick="closeModal('paymentModal')">Cancel</button>
                    <button type="button" class="btn-primary" id="processPaymentBtn" onclick="processCardPayment()">
                        <i class="fas fa-lock"></i> Pay Now
                    </button>
                </div>
                
                <p style="text-align: center; margin-top: 12px; font-size: 12px; color: var(--text-light);">
                    <i class="fas fa-lock"></i> Your payment is secure and encrypted
                </p>
            </div>
        </div>
    </div>

    <script src="api.js?v=3"></script>
    <script src="homeowner-script.js?v=3"></script>
</body>
</html>
